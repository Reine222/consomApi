{% extends 'bases/base.html' %}


{% block main %}
<header class="site-header">
  <div class="row align-items-center">
    <div class="col-5 col-md-3">

    </div>
    <div class="col-2 col-md-6 text-center site-logo-wrap">
      <a href="index.html" class="site-logo">M</a>
    </div>
    <div class="col-5 col-md-3 text-right menu-burger-wrap">
      <a href="#" class="site-nav-toggle js-site-nav-toggle"><i></i></a>

    </div>
  </div>

</header> <!-- site-header -->

<div class="main-wrap " id="section-home">

  <div class="cover_1 overlay bg-light">
    <div class="img_bg" style="background-image: url(/static/images/slider-1.jpg);" data-stellar-background-ratio="0.5">
      <div class="container">
        <div class="row align-items-center justify-content-center text-center">
          <div class="col-md-10" data-aos="fade-up">
            
            {% for item in translate %}

            <h2 class="heading mb-5">{{item.title}}</h2>

            {% endfor %}

            <p><a href="#section-reservation" class="smoothscroll btn btn-outline-white px-5 py-3">Reserve A Table</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- .cover_1 -->

  <div class="section" data-aos="fade-up">
    <div class="container">
      <div class="row section-heading justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <h2 class="heading mb-3">Find your best food</h2>
          <p class="sub-heading mb-5">Free Website Template For Restaurants Made by Colorlib</p>
        </div>
      </div>
      <div class="row">

        <div class="ftco-46">
          <div class="ftco-46-row d-flex flex-column flex-lg-row">
            <div class="ftco-46-image" style="background-image: url(/static/images/img_1.jpg);"></div>
            <div class="ftco-46-text ftco-46-arrow-left">
              <h4 class="ftco-46-subheading">Vegies</h4>
              <h3 class="ftco-46-heading">Beef Empanadas</h3>
              <p class="mb-5">Separated they live in Bookmarksgrove right at the coast of the Semantics, a large
                language ocean.</p>
              <p><a href="#" class="btn-link">Learn More <span class="ion-android-arrow-forward"></span></a></p>
            </div>
            
            <div class="ftco-46-image" style="background-image: url(/static/images/img_2.jpg);"></div>
          </div>

          <div class="ftco-46-row d-flex flex-column flex-lg-row">

            <div class="ftco-46-text ftco-46-arrow-right">
              <h4 class="ftco-46-subheading">Food</h4>
              <h3 class="ftco-46-heading">Buttermilk Chicken Jibaritos</h3>
              <p class="mb-5">A small river named Duden flows by their place and supplies it with the necessary
                regelialia.</p>
              <p><a href="#" class="btn-link">Learn More <span class="ion-android-arrow-forward"></span></a></p>
            </div>

            <div class="ftco-46-image" style="background-image: url(/static/images/img_3.jpg);"></div>

            <div class="ftco-46-text ftco-46-arrow-up">
              <h4 class="ftco-46-subheading">Food</h4>
              <h3 class="ftco-46-heading">Chicken Chimichurri Croquettes</h3>
              <p class="mb-5">Even the all-powerful Pointing has no control about the blind texts it is an almost
                unorthographic life.</p>
              <p><a href="#" class="btn-link">Learn More <span class="ion-android-arrow-forward"></span></a></p>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div> <!-- .section -->

  <div class="section pb-3 bg-white" id="section-about" data-aos="fade-up">
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-md-12 col-lg-8 section-heading">
          <h2 class="heading mb-5">The Restaurant</h2>
          <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the
            blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language
            ocean.</p>
          <p>It is a paradisematic country, in which roasted parts of sentences fly into your mouth.</p>
        </div>
      </div>
    </div>
  </div> <!-- .section -->


  <div class="section bg-white pt-2 pb-2 text-center" data-aos="fade">
    <p><img src="/static/images/bg_hero.png" alt="Image" class="img-fluid"></p>
  </div> <!-- .section -->



  
  <div id="identifiant_id">

    <!-- ********************************************* CHEF ****************************************************** -->
    <div class="section bg-white" data-aos="fade-up">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-12 section-heading text-center">
            <h2 class="heading mb-5">Meet The Chefs</h2>
          </div>
        </div>
        <div class="row">
          <div v-for = "items in resultats_chef" class="col-md-6 pr-md-5 text-center mb-5">
            <div class="ftco-38">
              <div class="ftco-38-img">
                <div class="ftco-38-header">
                  <img :src="items.image" alt="Image">
                  <h3 class="ftco-38-heading">${items.nom}</h3>
                  <p class="ftco-38-subheading">${items.profession}</p>
                </div>
                <div class="ftco-38-body">
                  <p>${items.description}</p>
                    <a :href="items.fb" class="p-2"><span class="fa fa-facebook"></span></a>
                    <a :href="items.tweet" class="p-2"><span class="fa fa-twitter"></span></a>
                    <a :href="items.instagram" class="p-2"><span class="fa fa-instagram"></span></a>
                  </p>
                </div>
              </div>
            </div>
          </div>
         
          <!-- <div class="col-md-4"></div> -->
        </div>
      </div>
    </div> <!-- .section -->


    <!-- ********************************************* MENU ****************************************************** -->
    <div class="section bg-light" id="section-menu" data-aos="fade-up">
      <div>
        <div class="container">
          <div class="row section-heading justify-content-center mb-5">
            <div class="col-md-8 text-center">
              <h2 class="heading mb-3">Menu</h2>
              <p class="sub-heading mb-5">Free Website Template For Restaurants Made by Colorlib</p>  
            </div>
          </div>
          <div class="row justify-content-center">
            <div class="col-md-8">
              <div id="mon_menu_moi">
                <ul class="nav site-tab-nav" id="pills-tab" role="tablist">

                  <li v-for="ites in resultatsmenu" class="nav-item">
                    <a class="nav-link" id="pills-ID-tab" data-toggle="pill" :href='"#pills-' + ites.node.id + '"' role="tab" aria-controls="pills-ID" aria-selected="true">${ites.node.nom}</a>
                  </li>

                </ul>
                <div class="tab-content" id="pills-tabContent">

                  <div class="tab-pane fade show active" :id="'#pills-' + ites.node.id + " role="tabpanel" aria-labelledby="pills-ID-tab">
                    <div class="d-block d-md-flex menu-food-item">

                      <div class="text order-1 mb-3">
                        <img src="/static/images/img_1.jpg" alt="Image">
                        <h3><a href="#">Warm Spinach Dip &amp; Chips</a></h3>
                        <p>Spinach and artichokes in a creamy cheese dip with warm tortilla chips &amp; salsa.</p>
                      </div>
                      <div class="price order-2">
                        <strong>$10.49</strong>
                      </div>
                    </div> <!-- .menu-food-item -->

                    <div class="d-block d-md-flex menu-food-item">
                      <div class="text order-1 mb-3">
                        <img src="/static/images/img_2.jpg" alt="Image">
                        <h3><a href="#">Key Wast Machos</a></h3>
                        <p>Crisp tortilla and plantain chips covered with lightly spiced ground beef, melted cheese, pickled jalapeños, guacamole, sour cream and salsa.</p>
                      </div>
                      <div class="price order-2">
                        <strong>$11.99</strong>
                      </div>
                    </div> <!-- .menu-food-item -->

                    <div class="d-block d-md-flex menu-food-item">
                      <div class="text order-1 mb-3">
                        <img src="/static/images/img_3.jpg" alt="Image">
                        <h3><a href="#">Crispy Onions Rings</a></h3>
                        <p>A heaping mountain of rings, handmade with Panko breading and shredded coconut flakes.</p>
                      </div>
                      <div class="price order-2">
                        <strong>$11.99</strong>
                      </div>
                    </div> <!-- .menu-food-item -->

                    <div class="d-block d-md-flex menu-food-item">
                      <div class="text order-1 mb-3">
                        <img src="/static/images/img_1.jpg" alt="Image">
                        <h3><a href="#">Lobster &amp; Shrimp Quesadilla</a></h3>
                        <p>Lobster and tender shrimp, with onions, sweet peppers, spinach and our three cheese blend. Griddled and served with tomato salsa and sour cream.</p>
                      </div>
                      <div class="price order-2">
                        <strong>$13.99</strong>
                      </div>
                    </div> <!-- .menu-food-item -->


                  </div>
                 
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>  <!-- .section -->

  </div>











  



 <!-- ********************************************* SERVICES ****************************************************** -->

  <div class="section bg-white services-section" data-aos="fade-up">
    <div class="container">
      <div class="row section-heading justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <h2 class="heading mb-3">Other Services</h2>
          <p class="sub-heading mb-5">Free Website Template For Restaurants Made by Colorlib</p>
        </div>
      </div>
      <div id="graph_service">
        <div class="row">
          
          <div v-for="serv in resultats" class="col-m mb-5d-6 col-lg-4" data-aos="fade-up" data-aos-delay="100">
            <div class="media feature-icon d-block text-center">
              <div class="icon">
                <span :class="serv.node.icon"></span>
              </div> 
              <div class="media-body">
                <h3>${serv.node.titre}</h3>
                <p>${serv.node.description}</p>
              </div>
            </div>
          </div>
         

        </div>
      </div>
    </div>
  </div> <!-- .section -->






  <div class="section bg-light" data-aos="fade-up" id="section-reservation">
    <div class="container">
      <div class="row section-heading justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <h2 class="heading mb-3">Reservation</h2>
          <p class="sub-heading mb-5">Free Website Template For Restaurants Made by Colorlib</p>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-md-10 p-5 form-wrap">
          <form action="#">
            <div class="row mb-4">
              <div class="form-group col-md-4">
                <label for="name" class="label">Name</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-person"></span>
                  <input type="text" class="form-control" id="name">
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="email" class="label">Email</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-email"></span>
                  <input type="email" class="form-control" id="email">
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="phone" class="label">Phone</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-call"></span>
                  <input type="text" class="form-control" id="phone">
                </div>
              </div>

              <div class="form-group col-md-4">
                <label for="persons" class="label">Number of Persons</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-arrow-dropdown"></span>
                  <select name="persons" id="persons" class="form-control">
                    <option value="">1 person</option>
                    <option value="">2 persons</option>
                    <option value="">3 persons</option>
                    <option value="">4 persons</option>
                    <option value="">5+ persons</option>
                  </select>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="date" class="label">Date</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-calendar"></span>
                  <input type="text" class="form-control" id="date">
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="time" class="label">Time</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-time"></span>
                  <input type="text" class="form-control" id="time">
                </div>
              </div>
            </div>
            <div class="row justify-content-center">
              <div class="col-md-4">
                <input type="submit" class="btn btn-primary btn-outline-primary btn-block" value="Reserve Now">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div> <!-- .section -->

  <div class="section bg-white" data-aos="fade-up">
    <div class="container">
      <div class="row section-heading justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <h2 class="heading mb-3">Customer Reviews</h2>
        </div>
      </div>
      <div class="row justify-content-center text-center" data-aos="fade-up">
        <div class="col-md-8">
          <div class="owl-carousel home-slider-loop-false">


            <div class="item">
              <blockquote class="testimonial">
                <p>&ldquo;A small river named Duden flows by their place and supplies it with the necessary regelialia.
                  It is a paradisematic country, in which roasted parts of sentences fly into your mouth.&rdquo;</p>
                <div class="author">
                  <img src="/static/images/person_1.jpg" alt="Image placeholder" class="mb-3">
                  <h4>Maxim Smith</h4>
                  <p>CEO, Founder</p>
                </div>
              </blockquote>
            </div>
            <div class="item">
              <blockquote class="testimonial">
                <p>&ldquo;Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there
                  live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a
                  large language ocean.&rdquo;</p>
                <div class="author">
                  <img src="/static/images/person_2.jpg" alt="Image placeholder" class="mb-3">
                  <h4>Geert Green</h4>
                  <p>CEO, Founder</p>
                </div>
              </blockquote>
            </div>
            <div class="item">
              <blockquote class="testimonial">
                <p>&ldquo;Even the all-powerful Pointing has no control about the blind texts it is an almost
                  unorthographic life One day however a small line of blind text by the name of Lorem Ipsum decided to
                  leave for the far World of Grammar.&rdquo;</p>
                <div class="author">
                  <img src="/static/images/person_3.jpg" alt="Image placeholder" class="mb-3">
                  <h4>Dennis Roman</h4>
                  <p>CEO, Founder</p>
                </div>
              </blockquote>
            </div>
            <div class="item">
              <blockquote class="testimonial">
                <p>&ldquo;The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild
                  Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven
                  versalia, put her initial into the belt and made herself on the way.&rdquo;</p>
                <div class="author">
                  <img src="/static/images/person_2.jpg" alt="Image placeholder" class="mb-3">
                  <h4>Geert Green</h4>
                  <p>CEO, Founder</p>
                </div>
              </blockquote>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- .section -->

  <div class="section" data-aos="fade-up" id="section-contact">
    <div class="container">
      <div class="row section-heading justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <h2 class="heading mb-3">Get In Touch</h2>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-md-10 p-5 form-wrap">
          <form action="#">
            <div class="row mb-4">
              <div class="form-group col-md-4">
                <label for="name" class="label">Name</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-person"></span>
                  <input type="text" class="form-control" id="name">
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="email" class="label">Email</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-email"></span>
                  <input type="email" class="form-control" id="email">
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="phone" class="label">Phone</label>
                <div class="form-field-icon-wrap">
                  <span class="icon ion-android-call"></span>
                  <input type="text" class="form-control" id="phone">
                </div>
              </div>

              <div class="form-group col-md-12">
                <label for="message" class="label">Message</label>
                <textarea name="message" id="message" cols="30" rows="10" class="form-control"></textarea>
              </div>
            </div>
            <div class="row justify-content-center">
              <div class="col-md-4">
                <input type="submit" class="btn btn-primary btn-outline-primary btn-block" value="Send Message">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div> <!-- .section -->

  <div class="map-wrap" id="map" data-aos="fade"></div>
</div>
{% endblock main %}


{% block js %}
<script src='https://cdn.jsdelivr.net/npm/vue/dist/vue.js'></script>
<script src='https://unpkg.com/axios/dist/axios.min.js'></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>


<script>
  var ma_vue = new Vue({
    el: '#identifiant_id',
    data: { 
      resultats_chef: {'succes': false,'reponse':'' },
      resultats_plat_cat: [],
      resultatsmenu :[],
      base_url: window.location.protocol + "//" + window.location.host + '/',
    },
    delimiters: ["${", "}"],
    mounted () {
      this.getchef()
      this.getplatcat()
      this.getmenu()
    },
    methods: {
      getchef: function () {
        //axios.defaults.xsrfCookieName = 'csrftoken'
        //axios.defaults.xsrfHeaderName = 'X-CSRFToken'
        axios.get('http://127.0.0.1:8000/testimony/').then(response => {
          // console.log(response)
          this.resultats_chef= response.data  
        })
        .catch((err) => {
          // console.log(err)
          this.result['reponse'] = "Probleme de connexion , veuillez contactez l'administrateur"
          this.result['succes'] = false
        })
      },

      getplatcat: function () {
        //axios.defaults.xsrfCookieName = 'csrftoken'
        //axios.defaults.xsrfHeaderName = 'X-CSRFToken'
        axios.get('http://127.0.0.1:8000/categorie/').then(response => {
          // console.log(response)
          this.resultats_plat_cat= response.data  
        })
        .catch((err) => {
          // console.log(err)
          this.result['reponse'] = "Probleme de connexion , veuillez contactez l'administrateur"
          this.result['succes'] = false
        })
      },

      getmenu: function () {
        axios.defaults.xsrfCookieName = 'csrftoken'
        axios.defaults.xsrfHeaderName = 'X-CSRFToken'
        axios({
          url : this.base_url + 'graphql',
          method : 'post',
          data : {
            query: `
            query{
              allCategories{
                edges{
                  node{
                    id
                    nom
                    catPlat{
                      edges{
                        node{
                          id
                          nom
                          description
                          prix
                          status
                        }
                      }
                    }
                  }
                }
              }
            }
            `
          }
        }).then(response => {
          this.resultatsmenu = response.data.data.allCategories.edges;  
          // console.log(this.resultatsmenu); 
        })
        .catch((err) => {
          // console.log(err)
        })
      }

    }
  })
</script>


<script>
  var ma_vue2 = new Vue({
    el: '#graph_service',
    data: {
      resultats :[],
      base_url: window.location.protocol + "//" + window.location.host + '/',
      next: false,
      is_start: false,
      after: '',
    },
    delimiters: ["${", "}"],
    mounted () {
      this.getservices()
    },
    created(){
      window.addEventListener('scroll', (e)=>{
          this.verif()
      })
    },
    methods: {
      verif: function(e){
        if (this.is_start){return}

        var bod = document.querySelector("body")
        if (window.scrollY >= parseInt((bod.clientHeight * 50) / 100)){
          if (this.next){
            this.get_next_services()
          }
            
        }
      },
      getservices: function () {
        this.is_start = true
        axios.defaults.xsrfCookieName = 'csrftoken'
        axios.defaults.xsrfHeaderName = 'X-CSRFToken'
        axios({
          url : this.base_url + 'graphql',
          method : 'post',
          data : {
            query: `
            query{
              allServices(first:3 status:true){
                edges{
                  node{
                    id
                    titre
                    icon
                    description
                    status
                  }
                  cursor
                }
                pageInfo{
                  endCursor
                  hasNextPage
                }
              }
            }
            `
          }
        }).then(response => {
          this.resultats = response.data.data.allServices.edges;  
          this.next = response.data.data.allServices.pageInfo.hasNextPage;  
          this.after = response.data.data.allServices.pageInfo.endCursor;  
          this.is_start = false;  
          console.log(response.data.data.allServices.edges); 
        })
        .catch((err) => {
          // console.log(err)
        })
      },
      
      get_next_services: function () {
        this.is_start = true
        axios.defaults.xsrfCookieName = 'csrftoken'
        axios.defaults.xsrfHeaderName = 'X-CSRFToken'
        axios({
          url : this.base_url + 'graphql',
          method : 'post',
          data : {
            query: `
              query{
                allServices(first:3 after:"` + this.after + `" status:true){
                  edges{
                    node{
                      id
                      titre
                      icon
                      description
                      status
                    }
                    cursor
                  }
                  pageInfo{
                    endCursor
                    hasNextPage
                  }
                }
              }
            `
          }
        }).then(response => {
          this.resultats = this.resultats.concat(response.data.data.allServices.edges);
          this.next = response.data.data.allServices.pageInfo.hasNextPage;  
          this.after = response.data.data.allServices.pageInfo.endCursor;  
          this.is_start = false;  
          console.log(response.data.data.allServices.edges); 
        })
        .catch((err) => {
          // console.log(err)
        })
      },
    }
  })

</script>




{% endblock js %}





